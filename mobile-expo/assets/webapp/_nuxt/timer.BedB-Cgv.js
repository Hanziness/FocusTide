function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./uiToggle.B04Cw091.js","./entry.DJtxXFKM.js","./entry.BZfK04vC.css","./inputText.BNUabrli.js","./inputTime.BS_MtbIG.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as w,e as L,w as j,h as m,c as v,s as c,k as e,q as F,t as _,_ as Y,r as B,f as O,z as A,i as t,a as E,F as R,m as le,l as I,G as T,j as k,U as Z,J as S,H as M,V as ce,O as pe,W as me,X as se,Y as fe,Z as ge,$ as he,N as re,a0 as ve,Q as K,R as G,b as be,a1 as de,a2 as ye,a3 as ne,y as H,a4 as xe,a5 as ke,a6 as _e,n as $e,v as D,x as V,a7 as we,a8 as Ce,a9 as Te,aa as ae,ab as Ie,ac as W,ad as Se,ae as Me,af as Oe,ag as Ne,I as Pe,T as Ee,g as De,u as Fe}from"./entry.DJtxXFKM.js";import{_ as oe,a as Be,b as X}from"./favicon.CXLx-Hxn.js";import{a as U,A as Ae,c as Re,b as je,N as Le,d as ue,u as ee}from"./platforms.B9Y-KMms.js";import{u as te}from"./openpanels.D0YnwyFJ.js";const z={default:{work:[255,107,107],shortpause:[244,162,97],longpause:[46,196,182]},blue0:{work:[67,111,250],shortpause:[250,126,92],longpause:[111,173,38]},brightcompl:{work:[250,104,90],shortpause:[125,250,102],longpause:[77,248,250]},seasons:{work:[129,217,82],shortpause:[192,240,79],longpause:[230,227,76]},brewerset2:{work:[102,194,165],shortpause:[252,141,98],longpause:[141,160,203]}},ze=(f,d,i)=>{d/=100,i/=100;const u=n=>(n+f/30)%12,s=d*Math.min(i,1-i),a=n=>i-s*Math.max(-1,Math.min(u(n)-3,Math.min(9-u(n),1)));return[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))]},ie=(f,d,i)=>{f/=255,d/=255,i/=255;const u=Math.max(f,d,i),s=u-Math.min(f,d,i),a=s?u===f?(d-i)/s:u===d?2+(i-f)/s:4+(f-d)/s:0;return[Math.round(60*a<0?60*a+360:60*a),Math.round(100*(s?u<=.5?s/(2*u-s):s/(2-(2*u-s)):0)),Math.round(100*(2*u-s)/2)]},He={class:"flex flex-row items-center gap-2"},Ve=["value","min","max"],Ue=["textContent"],Ke=w({__name:"inputNumber",props:{value:{type:Number,required:!0},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},prefix:{type:String,default:""},postfix:{type:String,default:""},valueClass:{type:String,default:""}},emits:["input"],setup(f,{emit:d}){const i=f,u=L({value:JSON.parse(JSON.stringify(i.value))});j(()=>u.value,n=>{n!=null&&!isNaN(n)&&isFinite(n)&&n<=i.max&&n>=i.min&&s("input",n)}),j(()=>i.value,n=>{u.value=n});const s=d,a=n=>{const l=Number.parseInt(n);isNaN(l)||(u.value=l)};return(n,l)=>(m(),v("div",He,[c("input",{class:"relative h-3 min-w-0 bg-transparent appearance-none group isolate w-full",value:e(u).value,min:i.min,max:i.max,type:"range",onInput:l[0]||(l[0]=g=>a(g.target.value))},null,40,Ve),c("span",{class:F(["min-w-[2ch] text-center",i.valueClass]),textContent:_(`${i.prefix}${e(u).value}${i.postfix}`)},null,10,Ue)]))}}),Q=Y(Ke,[["__scopeId","data-v-ef6e71ab"]]),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"})),Je={class:"flex flex-row gap-4"},q=w({__name:"colorChanger",props:{inputTheme:{}},emits:["input"],setup(f,{emit:d}){const i=f,u=ie(i.inputTheme[0],i.inputTheme[1],i.inputTheme[2]),s=B(u[0]??0),a=B(u[1]??10),n=B(60),l=O(()=>ze(s.value,a.value,n.value)),g=d;return j(l,o=>{g("input",o)}),j(()=>i.inputTheme,o=>{const r=ie(o[0],o[1],o[2]);s.value=r[0],a.value=r[1]}),(o,r)=>(m(),v("div",Je,[c("div",{class:"w-6 h-6 rounded-full flex-shrink-0",style:A({backgroundColor:`rgb(${e(l)[0]} ${e(l)[1]} ${e(l)[2]})`})},null,4),t(Q,{class:"flex-grow","value-class":"w-[4ch]",postfix:"°",value:e(s),min:0,max:360,onInput:r[0]||(r[0]=p=>s.value=p)},null,8,["value"]),t(Q,{class:"flex-grow","value-class":"w-[4ch]",value:e(a),postfix:"%",min:10,max:100,onInput:r[1]||(r[1]=p=>a.value=p)},null,8,["value"])]))}}),qe={class:"flex flex-row gap-0 isolate"},We=w({__name:"themePreview",props:{theme:{}},setup(f){const d=f,i=u=>`rgb(${u.join(", ")})`;return(u,s)=>(m(),v("div",qe,[c("div",{class:"rounded-full w-8 h-8 z-20",style:A({backgroundColor:i(d.theme.work)})},null,4),c("div",{class:"rounded-full w-8 h-8 -ml-2 z-10",style:A({backgroundColor:i(d.theme.shortpause)})},null,4),c("div",{class:"rounded-full w-8 h-8 -ml-2",style:A({backgroundColor:i(d.theme.longpause)})},null,4)]))}}),Xe={class:"flex flex-col gap-2"},Qe={class:"grid grid-flow-row grid-cols-3 gap-2 mb-2"},Ye=w({__name:"themeSettings",setup(f){const d=E(),i=L(d.visuals.theme),u=O(()=>Object.keys(z).find(n=>{const l=[i.work,i.shortpause,i.longpause].flat(),g=[z[n].work,z[n].shortpause,z[n].longpause].flat();return l.every((o,r)=>g[r]===o)})),s=B(u===void 0);return(a,n)=>(m(),v("div",Xe,[c("div",Qe,[(m(!0),v(R,null,le(e(z),(l,g)=>(m(),T(oe,{key:`theme-${g}`,title:"",class:"text-center",active:!e(s)&&e(u)===g,onClick:o=>{e(d).visuals.theme.work=l.work,e(d).visuals.theme.shortpause=l.shortpause,e(d).visuals.theme.longpause=l.longpause,s.value=!1}},{pre:k(()=>[t(We,{class:"mx-auto",theme:l},null,8,["theme"])]),_:2},1032,["active","onClick"]))),128)),t(oe,{key:"custom",title:a.$t("settings.values.visuals.theme.custom"),class:"text-center",active:e(s),onClick:n[0]||(n[0]=l=>s.value=!0)},null,8,["title","active"])]),e(s)?(m(),v(R,{key:0},[t(q,{"input-theme":e(i).work,onInput:n[1]||(n[1]=l=>e(i).work=l)},null,8,["input-theme"]),t(q,{"input-theme":e(i).shortpause,onInput:n[2]||(n[2]=l=>e(i).shortpause=l)},null,8,["input-theme"]),t(q,{"input-theme":e(i).longpause,onInput:n[3]||(n[3]=l=>e(i).longpause=l)},null,8,["input-theme"])],64)):I("",!0)]))}}),Ze=["textContent"],J=w({__name:"tabHeader",props:{active:{type:Boolean,default:!1},text:{type:String,default:""}},setup(f){const d=f;return(i,u)=>(m(),v("div",{role:"tab",tabindex:"0",class:F(["box-border flex flex-row items-center justify-center flex-1 h-full p-2 mx-1 space-x-1 text-center transition-colors rounded-lg cursor-pointer select-none first-of-type:ml-0 last-of-type:mr-0",[{"bg-surface-variant dark:bg-surface-darkvariant":!d.active,"bg-primary text-white dark:bg-primary-dark dark:text-primary-darkon px-3 md:px-2":d.active}]])},[Z(i.$slots,"icon"),c("span",{class:F([{"hidden md:block":!d.active}]),textContent:_(d.text)},null,10,Ze)],2))}}),et=["textContent"],tt=w({__name:"exportButton",setup(f){const d=()=>{const i=E().$state,u=U().$state,s={settings:i,tasklist:u},a=document.createElement("a");a.href=`data:text/plain;charset=utf-8,${encodeURIComponent(JSON.stringify(s))}`,a.download="focustide-settings.json",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)};return(i,u)=>(m(),T(M,{"default-style":"",importance:e(S).Filled,onClick:d},{default:k(()=>[c("span",{textContent:_(i.$t("settings.manage.buttons.save"))},null,8,et)]),_:1},8,["importance"]))}}),st=["textContent"],nt=w({__name:"importButton",setup(f){const d=B(null);function i(a,n){const l=Object.keys(a.$state);return Object.keys(n).filter(g=>l.includes(g)).reduce((g,o)=>Object.assign(g,{[o]:n[o]}),{})}const u=()=>{var a;(a=d.value)==null||a.click()},s=()=>{var l;const a=(l=d.value.files)==null?void 0:l.item(0);if(!a)return;const n=new FileReader;n.onload=g=>{if(!g.target)return;const o=g.target.result;if(o)try{const r=JSON.parse(o),p=E(),y=U();p.$patch(i(p,r.settings)),y.$patch(i(y,r.tasklist))}catch(r){console.warn(r)}},n.readAsText(a)};return(a,n)=>(m(),T(M,{"default-style":"",importance:e(S).Filled,onClick:u},{default:k(()=>[c("input",{ref_key:"fileinput",ref:d,accept:".json",type:"file",hidden:"",onChange:s},null,544),c("span",{textContent:_(a.$t("settings.manage.buttons.load"))},null,8,st)]),_:1},8,["importance"]))}}),at={class:"flex flex-col items-center"},ot=c("img",{src:Be,width:"64",height:"64",class:"inline-block p-2 mb-1 bg-red-200 rounded-lg"},null,-1),it=c("div",{class:"inline-block text-2xl font-bold"}," FocusTide ",-1),lt=["textContent"],rt=["textContent"],dt={class:"flex flex-col items-center justify-center mt-8 text-center"},ut={class:"mb-2"},ct=["textContent"],pt=c("span",{class:"italic"},"— Imre",-1),mt=["textContent"],ft={class:"flex flex-row flex-wrap justify-center gap-2 mt-3 text-center"},gt=["textContent"],ht=["textContent"],vt=["textContent"],bt=["textContent"],yt={class:"flex flex-row items-center space-x-2 text-sm"},xt=w({__name:"aboutTab",setup(f){const d=re(),i=O(()=>d.public.PLATFORM===Ae.mobile),u=ce();return(s,a)=>(m(),v("div",at,[ot,c("div",null,[it,c("sup",{class:"text-base",textContent:_(e(u).version)},null,8,lt)]),c("div",{textContent:_(s.$t("settings.about.madeby"))},null,8,rt),c("div",dt,[c("div",ut,[c("span",{textContent:_(s.$t("settings.about.supportBody"))},null,8,ct),pe(),pt]),e(i)?(m(),v("div",{key:0,class:"px-4 my-2 text-sm",textContent:_(s.$t("settings.about.mobileSupport"))},null,8,mt)):I("",!0),c("div",ft,[t(M,{importance:e(S).Filled,dark:"",link:"","no-default-style":"","no-content-theme":"",href:"https://www.github.com/Hanziness/FocusTide?utm_source=FocusTide&utm_medium=web&utm_content=settings","inner-class":"flex flex-row items-center gap-1 text-slate-50 text-gray-50","bg-class":"bg-slate-900 dark:bg-slate-700"},{default:k(()=>[t(e(me)),c("span",{textContent:_(s.$t("settings.about.source"))},null,8,gt)]),_:1},8,["importance"]),e(i)?(m(),T(M,{key:1,importance:e(S).Filled,disabled:"","inner-class":"flex flex-row items-center gap-1 text-black","bg-class":"bg-yellow-300"},{default:k(()=>[t(e(se)),c("span",{textContent:_(s.$t("settings.about.support"))},null,8,vt)]),_:1},8,["importance"])):(m(),T(M,{key:0,importance:e(S).Filled,link:"",dark:"","no-default-style":"","no-content-theme":"",href:"https://www.buymeacoffee.com/imreg?utm_source=FocusTide&utm_medium=web&utm_content=settings","inner-class":"flex flex-row items-center gap-1 text-black","bg-class":"bg-yellow-300"},{default:k(()=>[t(e(se)),c("span",{textContent:_(s.$t("settings.about.support"))},null,8,ht)]),_:1},8,["importance"]))]),c("div",{class:"my-2",textContent:_(s.$t("settings.about.share"))},null,8,bt),c("div",yt,[t(M,{link:"",circle:"",dark:"","no-default-style":"","no-content-theme":"",importance:e(S).Filled,href:"https://twitter.com/FocusTide?utm_source=FocusTide&utm_medium=web&utm_content=settings","bg-class":"bg-[#1da1f2]","inner-class":"!p-4 text-slate-50"},{default:k(()=>[t(e(fe),{"aria-label":s.$t("support.share.twitter"),size:"24"},null,8,["aria-label"])]),_:1},8,["importance"]),t(M,{link:"",circle:"",dark:"","no-default-style":"","no-content-theme":"",importance:e(S).Filled,href:`http://www.facebook.com/share.php?u=${e(d).public.URL}`,"bg-class":"bg-[#1877f2]","inner-class":"!p-4 text-slate-50"},{default:k(()=>[t(e(ge),{"aria-label":s.$t("support.share.facebook"),size:"24",class:"translate-x-[-1px]"},null,8,["aria-label"])]),_:1},8,["importance","href"]),t(M,{link:"",circle:"",dark:"","no-default-style":"","no-content-theme":"",importance:e(S).Filled,href:`https://reddit.com/submit?url=${e(d).public.URL}`,"bg-class":"bg-[#ff4500]","inner-class":"!p-4 text-slate-50"},{default:k(()=>[t(e(he),{"aria-label":s.$t("support.share.reddit"),size:"24"},null,8,["aria-label"])]),_:1},8,["importance","href"])])])]))}});var h=(f=>(f.Check="check",f.Text="text",f.Time="time",f.Number="number",f.Option="option",f.Empty="empty",f))(h||{});const kt=["tabindex"],_t={class:"flex flex-row items-center gap-4"},$t={class:"flex-grow select-none"},wt=["textContent"],Ct=["textContent"],Tt={key:0,class:"flex-shrink-0 w-36"},It={key:0},x=w({__name:"settingsItem",props:{path:{},type:{},disabled:{type:Boolean},choices:{},min:{},max:{}},emits:["input"],setup(f,{emit:d}){const i={check:K(()=>G(()=>import("./uiToggle.B04Cw091.js"),__vite__mapDeps([0,1,2]),import.meta.url)),text:K(()=>G(()=>import("./inputText.BNUabrli.js"),__vite__mapDeps([3,1,2]),import.meta.url)),time:K(()=>G(()=>import("./inputTime.BS_MtbIG.js"),__vite__mapDeps([4,1,2]),import.meta.url)),number:K(()=>G(()=>Promise.resolve().then(()=>Ge),void 0,import.meta.url)),option:null,empty:null},u=E(),s=f,a="settings.values."+s.path,n=d,l=O({get(){if(s.type===h.Empty)return null;let o=u.$state;const r=s.path.split(".");for(let p=0;p<r.length&&(o=o[r[p]]||null,o!==void 0);p++);return typeof o=="string"||typeof o=="number"||typeof o=="boolean"?o:null},set(o){if(s.type===h.Empty)return;const r={};let p=r;const y=s.path.split(".");for(let P=0;P<y.length;P++)p[y[P]]=P===y.length-1?o:{},p=p[y[P]];u.$patch(r),n("input",o)}}),g=O(()=>![h.Option,h.Empty].includes(s.type));return(o,r)=>(m(),v("div",{class:F(["flex flex-col justify-start gap-2",{"pointer-events-none opacity-60":s.disabled}]),tabindex:o.disabled?-1:0},[c("div",_t,[c("div",$t,[c("div",{textContent:_(o.$t(a+"._title"))},null,8,wt),c("div",{class:"text-sm opacity-80",textContent:_(o.$t(a+"._description"))},null,8,Ct)]),g.value?(m(),v("div",Tt,[(m(),T(ve(i[s.type]),{disabled:s.disabled,min:s.min,max:s.max,choices:s.choices,class:"ml-auto",value:l.value,onInput:r[0]||(r[0]=p=>l.value=p)},null,40,["disabled","min","max","choices","value"]))])):I("",!0)]),g.value?I("",!0):(m(),v("div",It,[s.type===e(h).Option?(m(),T(X,{key:0,choices:s.choices,disabled:s.disabled,value:l.value??"","translation-key":a,onInput:r[1]||(r[1]=p=>l.value=p)},null,8,["choices","disabled","value"])):I("",!0),Z(o.$slots,"default")]))],10,kt))}}),St={},Mt={class:"h-0 my-2 border-t border-gray-200 dark:border-gray-600"};function Ot(f,d){return m(),v("hr",Mt)}const N=Y(St,[["render",Ot]]),Nt={class:"fixed z-40 w-full h-full p-0 md:p-4 md:max-w-screen-sm"},Pt={class:"px-4 mt-4 mb-2 text-xl font-bold uppercase"},Et={class:"flex-grow overflow-y-auto"},Dt={key:1,class:"settings-tab"},Ft={class:"grid grid-flow-col grid-cols-2 gap-2 mt-1"},Bt={key:2,class:"settings-tab"},At={class:"flex flex-row items-center px-3 py-4 space-x-2 rounded-lg ring-inset ring ring-primary bg-primary/20 dark:bg-gray-700 dark:text-gray-100"},Rt=["textContent"],jt={key:3,class:"settings-tab"},Lt={key:4,class:"settings-tab"},zt={class:"flex flex-row flex-none h-20 p-4"},Ht=w({__name:"settingsPanel",setup(f){const d=re(),i=be(),u=te(),s=Re(),a=je(),n=E(),l=O(()=>d.public.PLATFORM==="web"),g=O(()=>d.public.PLATFORM==="mobile"),o=L({activeTab:1,resetConfirm:!1});return a.updateEnabled(),(r,p)=>(m(),v("section",Nt,[c("div",{class:"flex flex-col h-full overflow-hidden rounded-none shadow-lg bg-surface-light text-surface-onlight md:rounded-xl md:dark:ring-1 dark:ring-surface-ondark dark:ring-opacity-20 ring-inset dark:bg-surface-dark dark:text-surface-ondark",style:A({"padding-top":`${e(s).padding.top}px`,"padding-bottom":`${e(s).padding.bottom}px`})},[c("h1",Pt,[c("span",null,_(r.$t("settings.heading")),1),t(M,{"aria-label":r.$t("settings.buttons.close"),"default-style":"",circle:"",importance:e(S).Text,class:"float-right -mt-2 -mr-2",tabindex:"0",onClick:p[0]||(p[0]=y=>e(u).settings=!1)},{default:k(()=>[t(e(de),{"aria-label":r.$t("settings.buttons.close")},null,8,["aria-label"])]),_:1},8,["aria-label","importance"])]),c("div",Et,[t(H,{tag:"div",name:"tab-transition",mode:"out-in",class:"relative w-full"},{default:k(()=>[e(o).activeTab===1?(m(),v("div",Dt,[t(X,{choices:r.$languages,value:e(n).lang,"override-text":{title:r.$languages,description:{}},onInput:p[1]||(p[1]=y=>{e(n).lang=y})},null,8,["choices","value","override-text"]),t(N),t(x,{type:e(h).Check,path:"adaptiveTicking.enabled"},null,8,["type"]),e(l)?(m(),T(x,{key:0,type:e(h).Check,path:"timerControls.enableKeyboardShortcuts"},null,8,["type"])):I("",!0),t(x,{type:e(h).Option,path:"sectionEndAction",choices:{continue:"continue",stop:"stop",skip:"skip"}},null,8,["type"]),e(l)?(m(),v(R,{key:1},[t(N),t(x,{type:e(h).Check,path:"permissions.audio"},null,8,["type"]),t(x,{type:e(h).Check,path:"permissions.notifications",disabled:e(a).enabled===e(Le).Denied,onInput:p[2]||(p[2]=y=>{y===!0&&e(i).recordEvent("permission.notification")})},null,8,["type","disabled"])],64)):I("",!0),e(g)?(m(),v(R,{key:2},[t(N),t(x,{type:e(h).Check,path:"mobile.notifications.sectionOver"},null,8,["type"]),t(x,{type:e(h).Check,path:"mobile.notifications.persistent"},null,8,["type"])],64)):I("",!0),t(N),t(x,{type:e(h).Check,path:"tasks.enabled"},null,8,["type"]),t(x,{type:e(h).Number,path:"tasks.maxActiveTasks",min:1,max:15,disabled:!e(n).tasks.enabled},null,8,["type","disabled"]),t(x,{type:e(h).Check,path:"tasks.removeCompletedTasks",disabled:!e(n).tasks.enabled},null,8,["type","disabled"]),e(l)?(m(),v(R,{key:3},[t(N),t(x,{type:e(h).Empty,path:"manage"},null,8,["type"]),c("div",Ft,[t(tt),t(nt)])],64)):I("",!0),t(N),t(x,{type:e(h).Check,path:"reset"},null,8,["type"])])):e(o).activeTab===2?(m(),v("div",Bt,[t(x,{type:e(h).Number,path:"schedule.longPauseInterval",min:1,max:10},null,8,["type"]),t(N),t(x,{type:e(h).Empty,path:"schedule.lengths"},{default:k(()=>[t(X,{"translation-key":"timerpreset",choices:e(ye),value:e(n).getActiveSchedulePreset,onInput:p[3]||(p[3]=y=>e(n).applyPreset(y))},null,8,["choices","value"])]),_:1},8,["type"]),t(x,{type:e(h).Time,path:"schedule.lengths.work","min-ms":5e3},null,8,["type"]),t(x,{type:e(h).Time,path:"schedule.lengths.shortpause","min-ms":5e3},null,8,["type"]),t(x,{type:e(h).Time,path:"schedule.lengths.longpause","min-ms":5e3},null,8,["type"]),c("div",At,[t(e(ne)),c("span",{textContent:_(r.$t("settings.scheduleMinTime"))},null,8,Rt)])])):e(o).activeTab===3?(m(),v("div",jt,[t(x,{type:e(h).Empty,path:"visuals.theme"},null,8,["type"]),t(Ye),t(x,{type:e(h).Check,path:"visuals.darkMode"},null,8,["type"]),t(N),t(x,{type:e(h).Option,path:"currentTimer",choices:{traditional:"traditional",approximate:"approximate",percentage:"percentage"}},null,8,["type"]),t(N),t(x,{type:e(h).Check,path:"schedule.visibility.enabled"},null,8,["type"]),t(x,{type:e(h).Check,path:"schedule.visibility.showSectionType",disabled:!e(n).schedule.visibility.enabled},null,8,["type","disabled"]),t(x,{type:e(h).Number,path:"schedule.numScheduleEntries",min:2,max:5,disabled:!e(n).schedule.visibility.enabled},null,8,["type","disabled"]),t(N),t(x,{type:e(h).Check,path:"performance.showProgressBar"},null,8,["type"]),e(l)?(m(),T(x,{key:0,type:e(h).Check,path:"pageTitle.useTickEmoji"},null,8,["type"])):I("",!0)])):e(o).activeTab===4?(m(),v("div",Lt,[t(xt)])):I("",!0)]),_:1})]),c("div",zt,[t(J,{active:e(o).activeTab===1,text:r.$t("settings.tabs.main"),onClick:p[4]||(p[4]=y=>e(o).activeTab=1)},{icon:k(()=>[t(e(xe),{role:"presentation"})]),_:1},8,["active","text"]),t(J,{active:e(o).activeTab===2,text:r.$t("settings.tabs.timer"),onClick:p[5]||(p[5]=y=>e(o).activeTab=2)},{icon:k(()=>[t(e(ke),{role:"presentation"})]),_:1},8,["active","text"]),t(J,{active:e(o).activeTab===3,text:r.$t("settings.tabs.display"),onClick:p[6]||(p[6]=y=>e(o).activeTab=3)},{icon:k(()=>[t(e(_e),{role:"presentation"})]),_:1},8,["active","text"]),t(J,{active:e(o).activeTab===4,text:r.$t("settings.tabs.about"),onClick:p[7]||(p[7]=y=>e(o).activeTab=4)},{icon:k(()=>[t(e(ne),{role:"presentation"})]),_:1},8,["active","text"])])],4)]))}}),Vt=Y(Ht,[["__scopeId","data-v-e493cc20"]]),Ut={key:1,class:"break-words"},Kt=c("span",{class:"flex-grow"},null,-1),Gt={class:"flex flex-row items-center flex-shrink-0 gap-4 md:gap-3"},Jt=w({__name:"todoItem",props:{item:{type:Object,required:!0},manage:{type:Boolean,default:!1},droptarget:{type:Boolean,default:!1},moveable:{type:Boolean,default:!1}},emits:["input","update","delete","dropstart","dropfinish","droptarget"],setup(f,{emit:d}){const i=B(null),u=U(),s=E(),a=f,n=L({hovering:!1,dragged:!1,editing:!1,editedTitle:null}),l=d,g=O({get(){return a.item.state===ue.complete},set($){l("input",$)}}),o=O(()=>n.editing||a.moveable&&n.hovering),r=O({get(){return n.editedTitle??a.item.title},set($){n.editedTitle=$}}),p=O(()=>!u.tasks.some($=>$.id!==a.item.id&&$.title===r.value&&$.section===a.item.section));j(()=>n.editing,$=>{$&&$e(()=>{i.value.focus()})});const y=($,b)=>{$.dataTransfer&&($.dataTransfer.dropEffect="move",$.dataTransfer.effectAllowed="move",$.dataTransfer.setData("source.title",b.title),$.dataTransfer.setData("source.section",b.section),n.dragged=!0)},P=$=>{p.value&&a.item.title!==r.value&&l("update",$),n.editedTitle=null};return($,b)=>(m(),v("div",{class:F(["relative flex flex-row items-center px-2 py-3 transition-all duration-200 border-l-8 rounded-md hover:shadow-sm border-themed md:py-2",[{"opacity-50 line-through italic":a.item.state===2,"cursor-move":e(o),"ring ring-themed":e(n).dragged||a.droptarget,"bg-themed !text-white":a.manage&&e(n).editing},a.manage&&e(n).editing?"bg-themed":"bg-surface-light dark:bg-surface-dark hover:shadow-md hover:ring-1 hover:ring-themed"]]),style:A({"--theme":e(s).getColor(a.item.section,e(Oe).modern)}),draggable:"true",onMouseenter:b[6]||(b[6]=C=>e(n).hovering=!0),onMouseleave:b[7]||(b[7]=C=>e(n).hovering=!1),onDragstart:b[8]||(b[8]=C=>{y(C,f.item),l("dropstart",a.item)}),onDragover:b[9]||(b[9]=W(()=>{},["prevent"])),onDragend:b[10]||(b[10]=C=>{e(n).dragged=!1,l("dropfinish",a.item)}),onDragenter:b[11]||(b[11]=C=>l("droptarget",a.item))},[c("div",{class:F(["absolute left-0 top-0 h-full self-stretch bg-themed transition-all duration-75 text-white flex flex-row items-center flex-shrink-0 cursor-move",e(o)?"w-6":"w-0"])},[D(c("span",null,[a.manage&&e(n).editing?(m(),T(e(we),{key:0,size:"16"})):(m(),T(e(Ce),{key:1,size:"16"}))],512),[[V,e(o)]])],2),c("div",{class:F(["flex flex-col flex-grow w-full min-w-0 py-2 -my-2 transition-all duration-75 select-none mr-7",[e(o)?"translate-x-6":"translate-x-0"]]),onClick:b[3]||(b[3]=C=>e(n).editing=!0)},[a.manage&&e(n).editing?D((m(),v("input",{key:0,ref_key:"editbox",ref:i,"onUpdate:modelValue":b[0]||(b[0]=C=>ae(r)?r.value=C:null),class:"py-2 pl-1 -my-2 -ml-1 text-white bg-transparent outline-none",onBlur:b[1]||(b[1]=C=>(e(n).editing=!1,P(e(r)))),onKeyup:b[2]||(b[2]=Ie(W(C=>(e(n).editing=!1,P(e(r))),["exact"]),["enter"]))},null,544)),[[Te,e(r)]]):(m(),v("span",Ut,_(a.item.title),1))],2),Kt,c("div",Gt,[t(H,{name:"slidein"},{default:k(()=>[D(t(M,{circle:"",importance:e(S).Text,class:"-m-3 md:-m-2","inner-class":"p-3 md:p-2","bg-class":"ring-themed bg-themed",onClick:b[4]||(b[4]=C=>l("delete"))},{default:k(()=>[t(e(Se),{size:"18"})]),_:1},8,["importance"]),[[V,f.manage]])]),_:1}),D(c("input",{"onUpdate:modelValue":b[5]||(b[5]=C=>ae(g)?g.value=C:null),type:"checkbox",class:"w-6 h-6 mr-1 rounded accent-themed text-themed dark:text-themed md:w-5 md:h-5"},null,512),[[Me,e(g)]])])],38))}}),qt=["value","placeholder"],Wt=w({__name:"addTask",setup(f){const d=U(),i=ee(),u=B(null),s=L({taskTitle:"",taskState:ue.inProgress,valid:!1,debug_lastinput:""});j(()=>s.taskTitle,l=>{if(l.length<1){s.valid=!1;return}const g=d.tasks.filter(o=>o.title===l&&o.section===i.getCurrentItem.type);s.valid=g.length===0});const a=()=>{d.newTask(s.taskTitle,null,0,i.getCurrentItem.type,s.taskState),s.taskTitle="",u.value.focus()},n=l=>{s.valid&&(l.code.toLowerCase()==="enter"||l.keyCode===13)&&a()};return(l,g)=>(m(),v("div",{class:"flex flex-row items-center py-4 pl-4 pr-2 space-x-2 transition-all duration-500 shadow-sm bg-surface-light rounded-xl dark:bg-surface-dark focus-within:shadow-lg focus-within:ring-1 focus-within:ring-opacity-50 dark:focus-within:ring-opacity-50 focus-within:ring-primary dark:focus-within:ring-primary-dark focus-within:duration-200",style:A({"--theme":e(i).currentScheduleColourModern})},[c("input",{ref_key:"addtaskInput",ref:u,value:e(s).taskTitle,type:"text",required:"",class:"flex-grow block min-w-0 p-0 bg-transparent border-none dark:bg-transparent focus:ring-transparent focus:ring-offset-0 dark:focus:bg-transparent peer",placeholder:l.$t("tasks.addPlaceholder"),onInput:g[0]||(g[0]=o=>{var r;return e(s).taskTitle=(r=o.target)==null?void 0:r.value}),onKeyup:n},null,40,qt),t(M,{importance:e(S).Text,circle:"",class:"-my-2",disabled:!e(s).valid,onClick:a},{default:k(()=>[t(e(Ne),{"stroke-width":2,class:"relative",size:"24"})]),_:1},8,["importance","disabled"])],4))}}),Xt={class:"relative flex flex-row items-center justify-center h-10"},Qt=["textContent"],Yt={class:"absolute right-0 float-right -mr-2"},Zt=["textContent"],es=w({__name:"todoList",setup(f){const d=te(),i=E(),u=U(),s=ee(),a=L({manageMode:!0,dragging:!1,draggedItem:null,dropTarget:null}),n=O(()=>{let o=u.sortedTasks;return s.isRunning&&(o=o.filter(r=>r.section===s.getCurrentItem.type),i.tasks.maxActiveTasks>0&&(o=o.slice(0,i.tasks.maxActiveTasks))),o}),l=o=>{["id","title","state"].every(r=>Object.keys(o).includes(r))&&(a.dropTarget=o)},g=()=>{const o=u.tasks.indexOf(a.dropTarget);u.moveItem(a.draggedItem,o),a.draggedItem=null,a.dragging=!1,a.dropTarget=null};return(o,r)=>(m(),v("div",{class:"px-4 py-4 shadow-lg border-surface-dark dark:border-surface-light bg-surface-variant text-surface-onvariant dark:bg-surface-darkvariant dark:text-surface-ondarkvariant border-opacity-20 dark:border-opacity-20 md:border md:py-3",onKeyup:r[1]||(r[1]=W(()=>{},["stop"]))},[c("div",Xt,[c("p",{class:"text-xl font-bold tracking-tighter text-gray-800 uppercase dark:text-gray-100",textContent:_(o.$t("tasks.title"))},null,8,Qt),c("div",Yt,[t(M,{circle:"","default-style":"",theme:e(Pe).Primary,importance:e(S).Text,onClick:r[0]||(r[0]=p=>e(d).todo=!1)},{default:k(()=>[t(e(de))]),_:1},8,["theme","importance"])])]),D(c("div",{key:"notask",class:"mt-3 italic text-black dark:text-gray-200 text-opacity-70",textContent:_(o.$t("tasks.empty"))},null,8,Zt),[[V,e(n).length<1]]),t(Ee,{tag:"div",name:"transition-item",class:"flex flex-col px-2 py-1 mt-2 -mx-2 space-y-2 overflow-x-hidden overflow-y-auto max-h-64"},{default:k(()=>[(m(!0),v(R,null,le(e(n),p=>(m(),T(Jt,{key:p.id,manage:!e(s).isRunning&&e(a).manageMode,item:p,droptarget:p===e(a).dropTarget,moveable:"",onInput:y=>e(u).setComplete(p.id,y),onUpdate:y=>e(u).editTitle(p.id,y),onDelete:y=>e(u).deleteTask(p),onDropstart:y=>(e(a).draggedItem=p,e(a).dragging=!0),onDropfinish:g,onDroptarget:l},null,8,["manage","item","droptarget","onInput","onUpdate","onDelete","onDropstart"]))),128))]),_:1}),t(Wt,{class:"mt-3"})],32))}}),ts={class:"relative w-full h-full"},ss={class:"fixed z-40 w-screen h-screen bg-black bg-opacity-40"},ls=w({__name:"timer",setup(f){const d=te(),i=E(),u=ee(),{locale:s}=De();return Fe(()=>({htmlAttrs:{lang:s}})),(a,n)=>(m(),v("div",ts,[t(H,{"enter-from-class":"opacity-0","enter-active-class":"transition duration-300","leave-to-class":"opacity-0","leave-active-class":"transition"},{default:k(()=>[D(c("div",ss,null,512),[[V,e(d).settings]])]),_:1}),t(H,{"enter-from-class":"translate-x-32 opacity-0","enter-active-class":"transition duration-300 ease-out","leave-to-class":"scale-95 opacity-0","leave-active-class":"transition ease-in"},{default:k(()=>[D(t(Vt,{class:"right-0"},null,512),[[V,e(d).settings]])]),_:1}),t(H,{"enter-from-class":"translate-y-full","enter-active-class":"duration-300 ease-out","leave-to-class":"translate-y-full","leave-active-class":"duration-150 ease-in"},{default:k(()=>[e(i).tasks.enabled&&e(d).todo?(m(),T(es,{key:0,class:"fixed bottom-0 z-10 w-full md:max-w-lg transition-all rounded-t-xl md:right-4 md:pb-8",editing:[0].includes(e(u).timerState),onHide:n[0]||(n[0]=l=>e(d).todo=!1)},null,8,["editing"])):I("",!0)]),_:1}),Z(a.$slots,"default")]))}});export{ls as default};
