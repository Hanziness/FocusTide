function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./appBar.DD3IIdHM.js","./entry.DJtxXFKM.js","./entry.BZfK04vC.css","./platforms.B9Y-KMms.js","./openpanels.D0YnwyFJ.js","./_tutorialView.DbvlTfE8.js","./favicon.CXLx-Hxn.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as b,r as oe,o as j,p as se,c as h,u as ee,a as D,b as z,e as J,f as _,w as A,E,S as K,n as re,g as V,h as m,i as f,j as w,k as t,l as te,F as H,m as B,T as ne,q as N,t as R,s as M,v as le,x as ce,y as O,z as U,_ as P,A as W,B as q,C as de,D as X,G as C,H as F,P as ue,I as L,J as G,K as me,L as pe,M as fe,N as ge,O as he,Q,R as Y}from"./entry.DJtxXFKM.js";import{u as x,a as ve,T as u,b as _e,c as ie,A as Z}from"./platforms.B9Y-KMms.js";const Se=Symbol.for("nuxt:client-only"),ye=b({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(i,{slots:e,attrs:s}){const o=oe(!1);return j(()=>{o.value=!0}),se(Se,!0),a=>{var r;if(o.value)return(r=e.default)==null?void 0:r.call(e);const n=e.fallback||e.placeholder;if(n)return n();const c=a.fallback||a.placeholder||"",d=a.fallbackTag||a.placeholderTag||"span";return h(d,s,c)}}}),we=i=>{const e=Object.create(null);for(const s in i){const o=i[s];o!==void 0&&(e[s]=o)}return e},Te=(i,e)=>(s,o)=>(ee(()=>i({...we(s),...o.attrs},o)),()=>{var a,n;return e?(n=(a=o.slots).default)==null?void 0:n.call(a):null}),ke=b({name:"Title",inheritAttrs:!1,setup:Te((i,{slots:e})=>{var s,o,a;return{title:((a=(o=(s=e.default)==null?void 0:s.call(e))==null?void 0:o[0])==null?void 0:a.children)||null}})});function be(){const i=D(),e=x(),s=ve(),o=z(),a=J({lastUpdate:new Date().getTime(),nextTickDelta:1e3,timerHandle:null}),n=_(()=>e.getCurrentItem.length),c=_(()=>e.getCurrentItem.id),d=_({get(){return e.items[0].timeElapsed},set(p){e.items[0].timeElapsed=p}}),r=_(()=>n.value-d.value);A(c,(p,v)=>{p!==v&&(S(),i.tasks.removeCompletedTasks&&s.removeCompleted())}),A(()=>i.getAdaptiveTickRate,(p,v)=>{e.timerState===u.RUNNING&&p!==v&&g({})}),A(()=>e.timerState,(p,v)=>{if(v===u.COMPLETED&&S(),p!==v)switch(p){case u.RUNNING:T();break;case u.STOPPED:k(!0);break;case u.PAUSED:k(!1);break}});const S=()=>{const p=e.timerState===u.RUNNING?e.timerState:u.STOPPED;d.value=0,y({nextState:p,decrement:!1})},l=()=>{clearTimeout(a.timerHandle),a.timerHandle=null},g=({decrement:p=!0})=>{if(y({decrement:p}),e.timerState===u.RUNNING){let v=i.getAdaptiveTickRate;Math.abs(v-a.nextTickDelta)>50&&(a.nextTickDelta=v),l(),v=r.value>0?Math.min(v,r.value):v;const I=setTimeout(()=>{l(),g({})},v);a.timerHandle=I}},y=({nextState:p=u.RUNNING,decrement:v=!0})=>{const I=new Date().getTime(),$=I-a.lastUpdate;v&&(d.value+=$),a.lastUpdate=I;const ae=d.value>=n.value&&d.value-$<n.value;p===u.RUNNING&&ae&&(o.recordEvent(E.TIMER_FINISH),i.sectionEndAction===K.Stop?e.timerState=u.COMPLETED:i.sectionEndAction===K.Skip&&re(()=>{e.advance()}))},T=()=>{o.recordEvent(E.TIMER_START),e.lockInfo({length:n.value,type:e.getCurrentItem.type}),g({decrement:!1})},k=(p=!1)=>{l(),y({nextState:p?u.STOPPED:u.PAUSED}),o.recordEvent(p?E.TIMER_STOP:E.TIMER_PAUSE),p&&(e.lockInfo({length:void 0,type:void 0}),S())}}function xe(){const i=D(),e=x(),s=_e(),o=z(),a=V(),n=J({currentSoundSet:null,sounds:{work:null,shortpause:null,longpause:null}}),c=_(()=>{const l=o.events.slice(-1);return l.length>0?l[0]:null});A(c,l=>{l!==null&&l._event===E.TIMER_FINISH&&S(e.getSchedule[1].type)}),o.$subscribe(()=>{o.lastEvent!==null&&o.lastEvent._event===E.NOTIFICATIONS_ENABLED&&window.Notification&&window.Notification.permission==="default"&&window.Notification.requestPermission().then(l=>{i.$patch({permissions:{notifications:l==="granted"}})})}),j(()=>{o.recordEvent(E.APP_STARTED),e.timerState===1&&d(),window&&window.document&&"hidden"in window.document?(window.document.addEventListener("visibilitychange",()=>{i.registerNewHidden(window.document.hidden)},!1),i.registerNewHidden(window.document.hidden)):i.registerNewHidden(!1),s.updateEnabled()});const d=(l=i.audio.soundSet)=>{if(n.currentSoundSet!==l)try{for(const g in n.sounds){const y=g,T={source:new Audio(`/audio/${l}/${g}.mp3`),ready:!1};T.source.addEventListener("canplay",()=>{T.ready=!0}),n.sounds[y]=T}n.currentSoundSet=l}catch{}},r=l=>{var g;n.currentSoundSet||d(),n.sounds[l]!==null&&i.permissions.audio&&(n.sounds[l].source.volume=i.audio.volume,(g=n.sounds[l])==null||g.source.play())},S=l=>{if(r(l),window.Notification.permission!=="granted"||i.permissions.notifications!==!0)return;const g=[];l==="work"&&g.push({action:"ready",title:a.t("notification.action.ready")});try{new Notification(a.t("notification."+l+".title"),{tag:"FocusTide-SectionNotify",body:a.t("notification."+l+".body"),actions:g})}catch(y){console.warn(y)}}}function Ne(){const i=ie(),e=z(),s=D(),o=x();j(()=>{if(console.info("Mobile platform loaded"),!window){console.warn("Window does not exist, quitting");return}if(!window.NativeFramework){console.warn("Native framework not found");return}window.Send=function(a){switch(console.log(`Got: ${JSON.stringify(a)}`),a.type){case"setPadding":i.$patch({padding:a.payload});break}},e.$subscribe(()=>{window.NativeFramework.postMessage(JSON.stringify({type:"appEvent",payload:e.lastEvent})),e.lastEvent._event===E.TIMER_FINISH&&s.mobile.notifications.sectionOver&&window.NativeFramework.postMessage(JSON.stringify({type:"showNotification",payload:{title:"Hello",description:"This is a test notification :)"}}))}),o.$subscribe(()=>{const a=o.getCurrentItem;window.NativeFramework.postMessage(JSON.stringify({type:"tick",payload:{remaining_ms:a.length-a.timeElapsed,length_ms:a.length}}))}),window.NativeFramework.postMessage(JSON.stringify({type:"ready"}))})}const Ie={key:0,class:"font-bold text-[.75em]"},Ee=["textContent"],Ce=b({__name:"timerTraditional",emits:["tick"],setup(i,{emit:e}){const s=x(),o=_(()=>s.getCurrentTimerState===u.RUNNING),a=e,n=_(()=>{const c=Math.abs(Math.round((s.getCurrentItem.length-s.getCurrentItem.timeElapsed)/1e3)),d=Math.floor(c/(60*60)),r=Math.floor(c%(60*60)/60),S=Math.floor(c%60),l={hours:d,minutes:r,seconds:S},g=Object.keys(l).filter(k=>k!=="hours"||d>0),y=s.getCurrentItem.timeElapsed>s.getCurrentItem.length&&[d,r,S].some(k=>k>0),T={num:l,displayKeys:g,completed:y};return a("tick",(y?"+":"")+g.map(k=>T.num[k].toString().padStart(2,"0")).join(":")),T});return(c,d)=>(m(),h("div",{class:N(["md:text-[14rem] text-[9rem] leading-none timer-display relative",{active:t(o)}])},[f(ne,{name:"transition-traditional","enter-from-class":"translate-y-4 opacity-0 md:translate-y-0 md:translate-x-4","enter-active-class":"duration-500","enter-to-class":"","leave-class":"","leave-active-class":"absolute duration-300","leave-to-class":"opacity-0 md:-translate-x-8","move-class":"duration-500",class:"relative flex flex-col items-center transition md:flex-row isolate",tag:"div"},{default:w(()=>[t(n).completed?(m(),h("div",Ie," + ")):te("",!0),(m(!0),h(H,null,B(t(n).displayKeys,r=>(m(),h("div",{key:r,class:N(["flex flex-row transition",{"font-bold":r==="minutes","md:text-9xl md:self-start":r==="seconds","md:mr-4":r==="hours"}])},[(m(!0),h(H,null,B(t(n).num[r].toString().padStart(2,"0"),(S,l)=>(m(),h("span",{key:`${r}-${l}`,class:N(["w-[1ch]",{"md:text-right text-center":l===0,"md:text-left text-center":l===1}]),textContent:R(S)},null,10,Ee))),128))],2))),128))]),_:1})],2))}}),Me={class:"flex flex-row"},Pe={class:"-mr-2 font-bold"},$e=b({__name:"timerApproximate",emits:["tick"],setup(i,{emit:e}){const{t:s}=V(),o=x(),a=_(()=>o.getCurrentTimerState===u.RUNNING),n=e,c=_(()=>{const d=(o.getCurrentItem.length-o.getCurrentItem.timeElapsed)/6e4,r={value:0,string:""};return Math.abs(d)>59?(r.value=d>=0?Math.round(d/60):Math.ceil(d/60),r.string=s("timer.approximate.hours",r.value)):(r.value=d>0?Math.ceil(d):Math.min(-1,Math.floor(d)),r.string=s("timer.approximate.minutes",r.value)),n("tick",`${r.value<0?"+":""}${Math.abs(r.value)} ${r.string}`),r});return(d,r)=>(m(),h("div",{class:N(["timer-display select-none flex flex-col md:flex-row gap-2 items-center leading-none text-9xl xl:text-[12rem]",{active:t(a)}])},[M("div",Me,[f(O,{name:"transition-approximate-up"},{default:w(()=>[le(M("div",Pe," + ",512),[[ce,t(c).value<0]])]),_:1}),f(O,{name:"transition-approximate-up",mode:"out-in"},{default:w(()=>[(m(),h("div",{key:t(c).value,style:U({"--ch":Math.max(1,Math.ceil(Math.log10(Math.abs(t(c).value)+1)))}),class:"font-bold text-center md:text-right time-value"},R(Math.abs(t(c).value)),5))]),_:1})]),f(O,{name:"transition-approximate-up",mode:"out-in"},{default:w(()=>[(m(),h("div",{key:t(c).string,class:"text-[.5em]"},R(t(c).string),1))]),_:1})],2))}}),Oe=P($e,[["__scopeId","data-v-ff05d415"]]),Re=i=>(W("data-v-2e66e049"),i=i(),q(),i),Ae=["textContent"],De=Re(()=>M("span",{class:"text-4xl md:text-8xl"},"%",-1)),Ue=b({__name:"timerPercentage",emits:["tick"],setup(i,{emit:e}){const s=x(),o=_(()=>s.getCurrentTimerState===u.RUNNING),a=e,n=_(()=>{const c=Math.round((s.getCurrentItem.length-s.getCurrentItem.timeElapsed)/1e3),d=Math.round(s.getCurrentItem.length/1e3),r=Math.round((d-c)/d*100);return a("tick",`${r}%`),r});return(c,d)=>(m(),h("div",{class:N(["flex flex-row items-center gap-4 select-none timer-percentage timer-display",[{active:t(o)}]])},[f(O,{name:"transition-percentage",tag:"span",mode:"out-in"},{default:w(()=>[(m(),h("span",{key:t(n),style:U({width:`${Math.max(1,Math.ceil(Math.log10(t(n)+1)))}ch`}),class:"relative inline-block text-9xl md:text-[14rem] font-bold",textContent:R(t(n))},null,12,Ae))]),_:1}),De],2))}}),Fe=P(Ue,[["__scopeId","data-v-2e66e049"]]),Le={class:"timer-complete-icon"},Ge=b({__name:"timerComplete",setup(i){return(e,s)=>(m(),h("div",Le,[f(t(de))]))}}),He=P(Ge,[["__scopeId","data-v-2af21c86"]]),Be=b({__name:"_timerSwitch",props:{timerWidget:{default:X.Approximate}},setup(i){const e=x(),s=i,o=_(()=>e.timerState===u.RUNNING);return(a,n)=>(m(),h("div",{class:N(["relative grid text-black transition-opacity duration-500 select-none place-items-center dark:text-gray-100",[{"opacity-70":!t(o),"opacity-100":t(o)}]])},[f(O,{name:"timer-switch",mode:"out-in"},{default:w(()=>[t(e).getCurrentTimerState===t(u).COMPLETED?(m(),C(He,{key:"complete"})):s.timerWidget===t(X).Traditional?(m(),C(Ce,{key:"traditional",onTick:n[0]||(n[0]=c=>a.$emit("tick",c))})):s.timerWidget==="approximate"?(m(),C(Oe,{key:"approximate",onTick:n[1]||(n[1]=c=>a.$emit("tick",c))})):s.timerWidget==="percentage"?(m(),C(Fe,{key:"percentage",onTick:n[2]||(n[2]=c=>a.$emit("tick",c))})):te("",!0)]),_:1})],2))}}),je=P(Be,[["__scopeId","data-v-5344a307"]]),ze=i=>(W("data-v-0264e8c6"),i=i(),q(),i),Je=ze(()=>M("div",{class:"absolute invisible w-full h-full bg-gray-600 dark:visible mix-blend-multiply"},null,-1)),Ve=[Je],We=b({__name:"timerProgress",props:{timeElapsed:{type:Number,required:!0},timeOriginal:{type:Number,required:!0},scheduleEntryId:{type:Number,default:1},colour:{type:String,default:null},background:{type:Boolean,default:!1}},setup(i){const e=x(),s=i,o=_(()=>Math.min(s.timeElapsed/s.timeOriginal*100,100));return(a,n)=>(m(),h("div",{class:N(["absolute top-0 left-0 block w-full h-full transition-all duration-500 transform-gpu",[{"ease-out-expo":i.background}]]),style:U({"background-color":i.colour?i.colour:t(e).getScheduleColour[i.scheduleEntryId],transform:i.background?"translateX(0%)":`translateX(${-100+t(o)}%)`})},Ve,6))}}),qe=P(We,[["__scopeId","data-v-0264e8c6"]]),Ke={class:"flex items-center justify-center gap-5 md:gap-8"},Xe=b({__name:"controlsNew",setup(i){const e=x(),s=()=>{e.timerState!==u.COMPLETED&&e.getSchedule[0].timeElapsed>e.getSchedule[0].length?e.timerState=u.COMPLETED:e.timerState=u.STOPPED},o=()=>{e.timerState=e.timerState===u.RUNNING?u.PAUSED:u.RUNNING},a=()=>{e.timerState=u.STOPPED,e.advance()};return(n,c)=>(m(),h("div",Ke,[f(F,{circle:"","inner-class":"p-5",theme:t(L).Secondary,importance:t(G).Filled,class:N(["h-16 transition",{"scale-0 opacity-0 pointer-events-none":!t(e).isRunning}]),"aria-label":n.$t("controls.stop"),onClick:s},{default:w(()=>[f(t(ue),{size:24})]),_:1},8,["theme","importance","class","aria-label"]),f(F,{"aria-label":n.$t("controls.play"),"inner-class":"p-6 px-8 transition","bg-class":"rounded-full",class:"h-20 w-28",theme:t(L).NeutralDark,importance:t(G).Filled,onClick:o},{default:w(()=>[t(e).timerState!==t(u).RUNNING?(m(),C(t(me),{key:0,size:28})):(m(),C(t(pe),{key:1,size:28}))]),_:1},8,["aria-label","theme","importance"]),f(F,{"aria-label":n.$t("controls.advance"),circle:"","inner-class":"p-5",theme:t(L).Secondary,importance:t(G).Filled,class:N(["h-16 transition",{"scale-0 opacity-0 pointer-events-none":t(e).timerState===t(u).RUNNING}]),onClick:c[0]||(c[0]=d=>a())},{default:w(()=>[f(t(fe),{size:24})]),_:1},8,["aria-label","theme","importance","class"])]))}}),Qe=i=>(W("data-v-4dd54445"),i=i(),q(),i),Ye={class:"h-full overflow-hidden duration-300 ease-in dark:text-gray-50"},Ze=Qe(()=>M("div",{class:"absolute w-full h-full dark:bg-gray-900"},null,-1)),et=b({__name:"index",setup(i){const e=Q(()=>Y(()=>import("./appBar.DD3IIdHM.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),s=Q(()=>Y(()=>import("./_tutorialView.DbvlTfE8.js"),__vite__mapDeps([5,1,2,6]),import.meta.url)),o=D(),a=ie(),n=x(),c=ge(),{t:d}=V(),r=_(()=>`data:image/svg+xml,
<svg
  width="32"
  height="32"
  viewBox="0 0 32 32"
  fill="none"
  style="color: ${n.currentScheduleColour};"
  xmlns="http://www.w3.org/2000/svg"
>
<circle cx="16" cy="16" r="14" fill="currentColor" /></svg>`);ee({link:[{rel:"icon",type:"image/svg+xml",href:r}]}),be(),c.public.PLATFORM===Z.web?xe():c.public.PLATFORM===Z.mobile&&Ne();const S=J({timeString:""}),l=_(()=>n.getCurrentTimerState===3?o.pageTitle.useTickEmoji?"✔":d("ready").toLowerCase():S.timeString),g=_(()=>n.getCurrentItem?d("section."+n.getCurrentItem.type).toLowerCase():"Pomodoro"),y=_(()=>{const T=o.performance.showProgressBar?2:1;return n.getSchedule.slice(0,T)});return(T,k)=>{const p=ke,v=ye;return m(),h("section",Ye,[f(p,null,{default:w(()=>[he(R((t(l)?`(${t(l)}) `:"")+t(g)),1)]),_:1}),Ze,f(ne,{name:"progress-transition",tag:"div",duration:1e3},{default:w(()=>[(m(!0),h(H,null,B(t(y),(I,$)=>(m(),C(qe,{key:I.id,colour:t(n).getScheduleColour[$],background:$===0,"time-elapsed":t(n).getCurrentItem.timeElapsed,"time-original":t(n).getCurrentItem.length},null,8,["colour","background","time-elapsed","time-original"]))),128))]),_:1}),M("div",{class:"relative flex flex-col items-center justify-center w-full h-full isolate",style:U({"padding-top":`${t(a).padding.top}px`,"padding-bottom":`${t(a).padding.bottom}px`})},[f(t(e)),f(je,{key:"timerswitch","time-elapsed":t(n).getCurrentItem.timeElapsed,"time-original":t(n).getCurrentItem.length,"timer-state":t(n).timerState,"timer-widget":t(o).currentTimer,class:"flex-grow",onTick:k[0]||(k[0]=I=>t(S).timeString=I)},null,8,["time-elapsed","time-original","timer-state","timer-widget"]),f(Xe,{class:"mb-8"})],4),f(v,null,{default:w(()=>[f(t(s))]),_:1})])}}}),tt=P(et,[["__scopeId","data-v-4dd54445"]]),at=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"}));export{ye as _,at as i};
